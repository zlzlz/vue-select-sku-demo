webpackJsonp([1],{NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")({name:"App"},n,!1,function(e){a("rZ1d")},null,null).exports,s=a("/ocq"),i=a("mvHQ"),o=a.n(i),c=a("fZjL"),u=a.n(c),d=a("lHA8"),p=a.n(d),f=a("c/Tr"),h=a.n(f),m=a("zL8q"),v=a.n(m),g={data:function(){return{specsSelect:["山楂","果丹皮","20g","50g","100g"],items:[{attrHidden:!0,detailValue:"",value:"品种",detail:["果丹皮","山楂"]},{attrHidden:!0,detailValue:"",value:"重量",detail:["20g","50g","100g"]},{value:"大小",detailValue:"",attrHidden:!0,detail:["大"]}],attrs:[{stock:30,stockPattern:1,marketPrice:100,cost:100,salePrice:100,delFlg:"0",detail:{"重量":"20g","品种":"果丹皮"}},{stock:19,stockPattern:1,marketPrice:100,cost:100,salePrice:100,delFlg:"0",detail:{"重量":"50g","品种":"果丹皮"}},{stock:29,stockPattern:1,marketPrice:100,cost:100,salePrice:100,delFlg:"1",detail:{"重量":"100g","品种":"果丹皮"}},{stock:40,stockPattern:1,marketPrice:100,cost:100,salePrice:100,delFlg:"0",detail:{"重量":"20g","品种":"山楂"}},{stock:50,stockPattern:1,marketPrice:100,cost:100,salePrice:100,delFlg:"0",detail:{"重量":"50g","品种":"山楂"}},{stock:1,stockPattern:1,marketPrice:100,cost:100,salePrice:100,delFlg:"1",detail:{"重量":"100g","品种":"山楂"}}],itemsTable:[{attrHidden:!0,detailValue:"",detail:["山楂","果丹皮"],value:"品种"},{attrHidden:!0,detailValue:"",detail:["100g","20g","50g"],value:"重量"}],isSetListShow:!0,batchValue:"",currentType:"",form:{},formAttr:{},attrHidden:!1,submiting:!1}},methods:{attrHiddenBool:function(e,t){""==e.value?Object(m.Message)({message:"请填写规则名称",type:"error"}):e.attrHidden=!0},handleAddAttr:function(){this.checkAttr()&&this.items.push({value:"",detailValue:"",attrHidden:!1,detail:[]})},checkAttr:function(){var e=!0;return this.items.map(function(t){e&&(t.value?t.detail.length||(Object(m.Message)({message:"请设置规则属性",type:"error"}),e=!1):(Object(m.Message)({message:"请填写规则名称",type:"error"}),e=!1))}),e},attrAdd:function(e){if(!e.detailValue)return!1;var t=e.detailValue||"";if(!t.trim())return!1;var a=(t=t.trim()).split(/\s+/),l=e.detail.concat(a);l=h()(new p.a(l)),this.$set(e,"detail",l),e.detailValue=""},handleRemove:function(e){this.items.length>1?this.items.splice(e,1):Object(m.Message)({message:"请设置至少一个规则",type:"error"})},attrRemove:function(e,t,a){if(console.log("item:"),1==e.detail.length)return Object(m.Message)({message:"请设置至少一个属性",type:"error"}),!1;e.detail.splice(t,1);var l=this.specsSelect.indexOf(a);l>-1&&this.specsSelect.splice(l,1)},removeGoods:function(e){},checkGoods:function(){var e=!0;return this.attrs.map(function(t){e&&(u()(t.detail).length?t.cost!=parseFloat(t.cost)||t.cost<0?(Object(m.Message)({message:"请输入正确的商品进价",type:"error"}),e=!1):t.marketPrice!=parseInt(t.marketPrice)||t.marketPrice<0?(Object(m.Message)({message:"请输入正确的商品市场价",type:"error"}),e=!1):(t.salePrice!=parseFloat(t.salePrice)||t.salePrice<0)&&(Object(m.Message)({message:"请输入正确的商品售价",type:"error"}),e=!1):(Object(m.Message)({message:"请选择至少一个属性",type:"error"}),e=!1))}),e},addGoodsAttr:function(e){var t=this;this.attrs.length&&!this.checkGoods()||this.$confirm("生成将导致sku信息重新填写，是否要重新生成?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.specsSelect,a=[],l=[];if(e.length>0){a=JSON.parse(o()(t.items));for(var n=0;n<a.length;n++)a[n].detail=a[n].detail.filter(function(t){return e.includes(t)}),a[n].detail.length>0&&l.push(a[n])}else{var r=[];t.items.forEach(function(e){e.detail.forEach(function(e){r.push(e)})}),t.specsSelect=r}t.itemsTable=0==l.length?t.items:l;var s=0==l.length?t.items:l,i=[];if(s.length>1)for(n=0;n<s.length-1;n++){0==n&&(i=s[n].detail);var c=[];for(var u in i)for(var d in s[n+1].detail){var p="";p=0==n?s[n].value+":"+i[u]+","+s[n+1].value+":"+s[n+1].detail[d]:i[u]+","+s[n+1].value+":"+s[n+1].detail[d],c.push(p)}c.length>0&&(i=c)}else{var f=[];for(var h in s)for(var m in s[h].detail)f.push(s[h].value+":"+s[h].detail[m]);i=f}t.isFormatAttr(i)}).catch(function(){})},isFormatAttr:function(e){var t=[];e.forEach(function(e,a){var l={},n={};e.split(",").forEach(function(e,t){var a;a=e.split(":"),l[a[0]]=a[1]}),n.detail=l,n.stockPattern=1,n.stock=0,n.marketPrice=0,n.cost=0,n.salePrice=0,n.delFlg="0",t.push(n)}),this.attrs=t},clear:function(){var e=this;this.$confirm("确定要清空属性数据操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.attrs.splice(0),Object(m.Message)({message:"操作成功",type:"success"})}).catch(function(){})},change:function(e){console.log(e)},tapSpec:function(e,t){if(this.specsSelect.includes(e)){var a=this.specsSelect.indexOf(e);a>-1&&this.specsSelect.splice(a,1)}else this.specsSelect.push(e)},openBatch:function(e){this.currentType=e,this.isSetListShow=!1},setBatch:function(){var e=this;"string"!=typeof this.batchValue?(this.attrs.forEach(function(t){"0"==t.delFlg&&(t[e.currentType]=e.batchValue)}),this.cancelBatch()):this.$message({type:"warning",message:"请输入正确的值"})},cancelBatch:function(){this.batchValue="",this.currentType="",this.isSetListShow=!0}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"95px"}},[a("el-form-item",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{attrs:{type:"textarea",rows:"8",value:JSON.stringify(e.attrs)}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"formAttr",attrs:{model:e.formAttr,"label-width":"95px"}},[a("el-form-item",{attrs:{label:"规格名称"}},[a("el-row",{attrs:{gutter:10}},[e._l(e.items,function(t,l){return a("el-col",{key:l,staticStyle:{position:"relative","margin-right":"2px"},attrs:{span:4}},[a("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"设置名称"},nativeOn:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key))return null;e.attrHiddenBool(t,e.items)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.attrHidden,expression:"item.attrHidden == true"}],staticStyle:{position:"absolute",top:"-6px",right:"17px","margin-top":"1px",border:"none","font-size":"14px","font-weight":"bold","line-height":"1.8"},attrs:{type:"text",icon:"el-icon-close"},on:{click:function(t){e.handleRemove(l)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.attrHidden,expression:"item.attrHidden == false"}],staticStyle:{position:"absolute",top:"-6px",right:"17px","margin-top":"1px",border:"none","font-size":"14px","font-weight":"bold","line-height":"1.8"},attrs:{type:"text",icon:"el-icon-check"},on:{click:function(a){e.attrHiddenBool(t,e.items)}}})],1)}),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAddAttr}},[e._v("添加新规格")])],1)],2)],1),e._v(" "),e._l(e.items,function(t,l){return a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.attrHidden,expression:"item.attrHidden == true"}],key:l,attrs:{label:t.value+":"}},[a("el-row",{attrs:{gutter:13}},[e._l(t.detail,function(n,r){return a("el-col",{key:r,attrs:{span:2.5,name:n}},[a("el-button",{attrs:{size:"mini",type:e.specsSelect.includes(n)?"success":""},on:{click:function(t){e.tapSpec(n,l)}}},[a("el-tag",{attrs:{closable:"",size:"mini",effect:"plain"},on:{close:function(a){e.attrRemove(t,r,n)}}},[e._v(e._s(n))])],1)],1)}),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{size:"small",placeholder:"多个以空格隔开"},nativeOn:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key))return null;e.attrAdd(t)}},model:{value:t.detailValue,callback:function(a){e.$set(t,"detailValue",a)},expression:"item.detailValue"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-plus"},on:{click:function(a){e.attrAdd(t)}},slot:"append"})],1)],1)],2)],1)}),e._v(" "),a("el-form-item",[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addGoodsAttr(!0)}}},[e._v("全部生成")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.clear}},[e._v("清空所有")])],1),e._v(" "),e.isSetListShow?a("el-col",{attrs:{span:12}},[a("el-tag",{attrs:{type:"warning"},on:{click:function(t){e.openBatch("marketPrice")}}},[e._v("批量设置市场价")]),e._v(" "),a("el-tag",{attrs:{type:"warning"},on:{click:function(t){e.openBatch("cost")}}},[e._v("批量设置进价")]),e._v(" "),a("el-tag",{attrs:{type:"warning"},on:{click:function(t){e.openBatch("salePrice")}}},[e._v("批量设置售价")]),e._v(" "),a("el-tag",{attrs:{type:"warning"},on:{click:function(t){e.openBatch("stockPattern")}}},[e._v("批量设置库存比")])],1):a("div",[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{size:"mini",placeholder:"输入要设置的数量"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.setBatch(t)}},model:{value:e.batchValue,callback:function(t){e.batchValue=e._n(t)},expression:"batchValue"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("i",{staticClass:"set-btn blue el-icon-check",on:{click:e.setBatch}}),e._v(" "),a("i",{staticClass:"set-btn red el-icon-close",on:{click:e.cancelBatch}})])],1)],1)],1),e._v(" "),""!=e.items[0].value&&e.items[0].detail.length>0&&e.attrs.length?a("div",{attrs:{id:"arrtinfo"}},[a("el-form-item",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.attrs,height:e.attrs.length<5?50*e.attrs.length+60:400,size:"mini"}},[e._l(e.itemsTable,function(t,l){return a("el-table-column",{key:l,attrs:{label:t.value},scopedSlots:e._u([{key:"default",fn:function(l){return[a("span",[e._v(e._s(l.row.detail[t.value]))])]}}])})}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"市场价",disabled:1==t.row.delFlg,number:!0},model:{value:t.row.marketPrice,callback:function(a){e.$set(t.row,"marketPrice",a)},expression:"scope.row.marketPrice"}})]}}])},[a("template",{attrs:{slot:"header"},slot:"header"},[a("span",[a("b",{staticStyle:{color:"red"}},[e._v("*")]),e._v("市场价(分)")])])],2),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"进价",disabled:1==t.row.delFlg,number:!0},model:{value:t.row.cost,callback:function(a){e.$set(t.row,"cost",a)},expression:"scope.row.cost"}})]}}])},[a("template",{attrs:{slot:"header"},slot:"header"},[a("span",[a("b",{staticStyle:{color:"red"}},[e._v("*")]),e._v("进价(分)")])])],2),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"售价",disabled:1==t.row.delFlg,number:!0},model:{value:t.row.salePrice,callback:function(a){e.$set(t.row,"salePrice",a)},expression:"scope.row.salePrice"}})]}}])},[a("template",{attrs:{slot:"header"},slot:"header"},[a("span",[a("b",{staticStyle:{color:"red"}},[e._v("*")]),e._v("售价(分)")])])],2),e._v(" "),a("el-table-column",{attrs:{label:"库存"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.stock))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否使用",prop:"delFlg"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":"0","inactive-value":"1"},on:{change:function(a){e.removeGoods(t.row)}},model:{value:t.row.delFlg,callback:function(a){e.$set(t.row,"delFlg",a)},expression:"scope.row.delFlg"}})]}}])})],2)],1)],1):e._e()],2)],1)],1)],1)],1)},staticRenderFns:[]},b=a("VU/8")(g,k,!1,null,null,null).exports;l.default.use(s.a);var y=new s.a({routes:[{path:"/",name:"SelectSKU",component:b}]});a("tvR6");l.default.config.productionTip=!1,l.default.use(v.a),new l.default({el:"#app",router:y,components:{App:r},template:"<App/>"})},rZ1d:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.15e926031f8fbcea162d.js.map